<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--App自定义的css-->
		<!-- <link rel="stylesheet" type="text/css" href="../css/app.css" /> -->
		<style>
			
		/*头部样式*/
			 header {
			 	background-color: #007AFF !important;
			 }
			  header h1 {
			 	color: #fff !important;
			 }
			 
			 input[type=search], select, textarea {
			 	margin-bottom: 0;
			 }
			 
			 .mui-search.mui-active:before {
			 	top:25px;
			 	}
			/*行政区域样式*/
			  .mui-icon-left-nav {
			 	color: #FFF;
			 }
			.mui-card table {
				width: 100%;
				text-align: center;
			}
			.mui-card table tr {
				height: 25px;
			}
			.mui-card table tr td {
				width: 25%;
			}
			
			/*列表样式*/
			.mui-navigate-right:after, .mui-push-right:after {
			    right: 0px;
			    content: '';
			}
						
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">所有河道</h1>
		</header>
		<div class="mui-content">
			<div class="mui-content-padded" style="margin: 5px;">
				<div class="mui-input-row mui-search">
					<input type="search" class="mui-input-clear" placeholder="输入河道名称进行查询">
				</div>
			</div>
			<div class="mui-card">
				<table>
					<tr>
						<td>不限</td>
						<td>东城区</td>
						<td>西城区</td>
						<td>海淀区</td>
					</tr>
					<tr>
						<td>朝阳区</td>
						<td>丰台区</td>
						<td>门头沟区</td>
						<td>石景山区</td>
					</tr>
					<tr>
						<td>房山区</td>
						<td>通州区</td>
						<td>顺义区</td>
						<td>昌平区</td>
					</tr>
					<tr>
						<td>大兴区</td>
						<td>怀柔区</td>
						<td>平谷区</td>
						<td>延庆区</td>
					</tr>
					<tr>
						<td>密云区</td>
						
					</tr>
				</table>
			</div>
				<!--下拉刷新容器-->
		<div id="pullrefresh" class="mui-content">
			<!--数据列表-->
			<ul class="mui-table-view mui-table-view-chevron">
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river6.jpg">
						<div class="mui-media-body">
							双龙港
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅱ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class='mui-navigate-right' href="javascript:;">
						<img class="mui-media-object mui-pull-left" src="../images/river9.jpg">
						<div class="mui-media-body">
							八一浦
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅰ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river11.jpg">
						<div class="mui-media-body">
							九号浦
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅲ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river1.jpg">
						<div class="mui-media-body">
							永定河
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅰ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river6.jpg">
						<div class="mui-media-body">
							潮白河
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">劣Ⅴ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river2.jpg">
						<div class="mui-media-body">
							北运河
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅴ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river4.jpg">
						<div class="mui-media-body">
							拒马河
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅳ</span>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media">
					<a class="mui-navigate-right">
						<img class="mui-media-object mui-pull-left" src="../images/river8.jpg">
						<div class="mui-media-body">
							天堂河
							<p class='mui-ellipsis'>区级</p>
						</div>
						<span class="mui-badge ">Ⅰ</span>
					</a>
				</li>
			</ul>
		</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script>
			mui.init({
				swipeBack: true, //启用右滑关闭功能
				pullRefresh: {
					container: '#pullrefresh',
					up: {
						auto:true,
						contentrefresh: '正在加载...', 
						callback: pullupRefresh
					}
				}
			});
			
			//列表水质等级颜色区分
			$(document).ready(function(){
			$('.mui-navigate-right .mui-badge').each(function(){
				var index =$(this);
				index.css('color','#FFF')
				if(index.text() == 'Ⅰ'){
					index.css('background-color','skyblue');
				}else if(index.text() == 'Ⅱ') {
					index.css('background-color','deepskyblue');
				}else if(index.text() == 'Ⅲ') {
					index.css('background-color','yellowgreen');
				}else if(index.text() == 'Ⅳ') {
					index.css('background-color','gold');
				}else if(index.text() == 'Ⅴ') {
					index.css('background-color','orange');
				}else if(index.text() == '劣Ⅴ') {
					index.css('background-color','orangered');
				}
				
			});
		});
			//搜索功能实现
			var nativeWebview, imm, InputMethodManager;
			var initNativeObjects = function() {
				if (mui.os.android) {
					var main = plus.android.runtimeMainActivity();
					var Context = plus.android.importClass("android.content.Context");
					InputMethodManager = plus.android.importClass("android.view.inputmethod.InputMethodManager");
					imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);
				} else {
					nativeWebview = plus.webview.currentWebview().nativeInstanceObject();
				}
			};
			var showSoftInput = function() {
				if (mui.os.android) {
					imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);
				} else {
					nativeWebview.plusCallMethod({
						"setKeyboardDisplayRequiresUserAction": false
					});
				}
				setTimeout(function() { 
					var inputElem = document.querySelector('input');
					inputElem.focus();
					inputElem.parentNode.classList.add('mui-active'); //第一个是search，加上激活样式
				}, 200);
			};
			mui.plusReady(function() {
				initNativeObjects();
				showSoftInput();
			});


			var count = 0;
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullup((++count > 2)); //参数为true代表没有更多数据了。
//					var table = document.body.querySelector('.mui-table-view');
//					var cells = document.body.querySelectorAll('.mui-table-view-cell');
//					var newCount = cells.length>0?5:10;//首次加载10条，满屏
//					for (var i = cells.length, len = i + newCount; i < len; i++) {
//						var li = document.createElement('li');
//						li.className = 'mui-table-view-cell';
//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
//						table.appendChild(li);
//					}
				}, 1500);
			}

		</script>
	</body>

</html>